{% macro header(shadow=False) -%}
    {# shadow header to properly push down other elements #}
    <header {% if shadow %}style="position:relative;z-index:-1;"{% endif %} class="primary-header">
        <div class="header--meta">
            <a href="{{ url_for('main.index') }}"><img src="{{ url_for('static', filename='logo.svg') }}" alt="Unbag logo" title="Unbag" class="header--brand"></a>
            <div class="header--current-issue">
                <a href="#current-issue">{{ current_issue }} <div class="header--current-issue-icon"></div></a>
            </div>
            {% if current_post %}
                {% if current_post.event %}
                    {% set meta = current_post.event %}
                {% else %}
                    {% set meta = current_post.authors|join(', ', 'name') %}
                {% endif %}
                <div class="header--current-post">
                    <div class="marquee3k-size"><em>{{ current_post.title }}</em>, {{ meta }}</div>
                    {% if current_post.event %}
                        <div class="marquee3k" data-speed="0.15" data-pausable="true"><div><a href="{{ url_for('main.post', slug=current_post.slug, issue=current_post.issue.slug) }}"><em>{{ current_post.title }}</em>, {{ meta }}</a></div></div>
                    {% else %}
                        <div class="marquee3k" data-speed="0.15" data-pausable="true"><div><em>{{ current_post.title }}</em>, {{ meta }}</div></div>
                    {% endif %}
                </div>
            {% endif %}
        </div>
        {% if not shadow %}
            <div id="mobile-menu" class="mobile-menu"><img src="{{ url_for('static', filename='menu.svg') }}" /></div>
        {% endif %}
        <nav {% if not shadow %}id="main-nav"{% endif %}>
            <ul>
                <li><a href="{{ url_for('main.events') }}">Programs</a></li>
                <li><a href="{{ url_for('main.donate') }}">Donate</a></li>
                <li><a href="#about">About</a></li>
                <li><a href="https://unbag-llc.square.site/s/shop">Shop</a></li>
            </ul>
        </nav>
    </header>
{%- endmacro %}

<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  {% if current_post and not current_post.event %}
      <title>unbag - {{ current_post.title }}</title>
  {% elif current_issue %}
      <title>unbag - {{ current_issue }}</title>
  {% else %}
      <title>unbag</title>
  {% endif %}
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <link rel="icon" type="image/png" href="{{ url_for('static', filename='favicon/16.png') }}" sizes="16x16" />
  <link rel="icon" type="image/png" href="{{ url_for('static', filename='favicon/32.png') }}" sizes="32x32" />
  <link rel="icon" type="image/png" href="{{ url_for('static', filename='favicon/96.png') }}" sizes="96x96" />
  <style>
    {% for issue in issues %}
        .issue-{{ issue.id }}:hover {
            background: {{ issue.color }};
        }
    {% endfor %}
  </style>
</head>

<body class="preload">
    {% include "_messages.html" %}
    <main>
        {{ header() }}
        {{ header(shadow=True) }}
        {% block content %}
        {% endblock %}
        <div class="about">
            <a class="anchor" name="about"></a>
            <h2 class="section-title">About</h2>
            <div class="content">
                <p>unbag is a semi-annual magazine that promotes critical engagement with contemporary art and politics. Commissioning artists, writers, and thinkers who work outside of mainstream discourses, unbag functions as a space to explore ideas through discussion and exchange</p>
                <div class="masthead">
                    <div class="masthead--group">
                        <em>Editors</em>
                        <ul>
                            <li>Aaron Cooper</li>
                            <li>Natalia Tuero Germ√°n</li>
                            <li>Mylo Mendez</li>
                        </ul>
                    </div>
                    <div class="masthead--group">
                        <em>Art Direction &amp; Design</em>
                        <ul>
                            <li>American Artist</li>
                        </ul>
                    </div>
                    <div class="masthead--group">
                        <em>Web Development</em>
                        <ul>
                            <li>Francis Tseng</li>
                        </ul>
                    </div>
                    <div class="masthead--group">
                        <em>Operations &amp; Production</em>
                        <ul>
                            <li>Andy Wentz</li>
                        </ul>
                    </div>
                    <div class="masthead--group">
                        <em>Development</em>
                        <ul>
                            <li>Allison Jordan</li>
                            <li>Addison Vawters</li>
                        </ul>
                    </div>
                    <div class="masthead--group">
                        <em>Digital Communications</em>
                        <ul>
                            <li>Minhee Bae</li>
                        </ul>
                    </div>
                    <div class="masthead--group">
                        <em>Events</em>
                        <ul>
                            <li>Nevona Friedman</li>
                        </ul>
                    </div>
                </div>
                <div class="social">
                    <p>Visit us on Facebook:<br /><a href="https://facebook.com/unbagnyc">facebook.com/unbagnyc</a></p>
                    <p>Follow us on Instagram:<br /><a href="https://instagram.com/unbagnyc">instagram.com/unbagnyc</a></p>
                    <p>Follow us on Twitter:<br /><a href="https://twitter.com/unbagnyc">twitter.com/unbagnyc</a></p>
                    <p>Reach us at:<br /><a href="mailto:info@unbag.net">info@unbag.net</a></p>
                    <p>Sign up for News and Updates:<br />(newsletter url)</p>
                </div>
            </div>
        </div>
    </main>
    <script src="{{ url_for('static', filename='js/marquee3k.js') }}"></script>
    <script>
        window.onload = function() {
          document.body.classList.remove("preload");
        }

        Marquee3k.init();
        document.getElementById('mobile-menu').addEventListener('click', () => {
            let display = document.getElementById('main-nav').style.display;
            document.getElementById('main-nav').style.display = display == 'block' ? 'none' : 'block';
        });
    </script>
</body>
</html>
